<!-- session_row.html -->

<tr id="id{{ session.id }}">
    <td>{{ session.id }}</td>
    <td><a href="{{ url_for('session_details', session_id=session.id) }}" hx-get="{{ url_for('session_details', session_id=session.id) }}" hx-target="#detailsPane" hx-swap="innerHTML">
        {{ session.name }}
    </a></td>
    <td>{{ session.start_date.strftime('%m/%d/%Y') if session.start_date else 'Date not set' }}</td>
    <td>{{ session.start_time.strftime('%H:%M') if session.start_time else 'Time not set' }}</td>
    <td>{{ session.status }}</td>
    <td>{{ session.type }}</td>
    <td>
        {% if session.teachers %}
            {% set school_names = [] %}
            {% for teacher in session.teachers %}
                {% set _ = school_names.append(teacher.primary_affiliation_id) %}
            {% endfor %}
            {{ school_names|join(', ') }}
        {% else %}
            Teacher not set
        {% endif %}
    </td>
    <td>
        {% if session.teachers %}
            {% set teacher_names = [] %}
            {% for teacher in session.teachers %}
                {% set _ = teacher_names.append(teacher.name) %}
            {% endfor %}
            {{ teacher_names|join(', ') }}
        {% else %}
            Teacher not set
        {% endif %}
    </td>
    <td>
        {% if session.volunteers %}
            {% set volunteer_names = [] %}
            {% for volunteer in session.volunteers %}
                {% set _ = volunteer_names.append(volunteer.name) %}
            {% endfor %}
            {{ volunteer_names|join(', ') }}
        {% else %}
            volunteer not set
        {% endif %}
    </td>
    <td>
        {% if session.volunteers %}
            {% set volunteer_orgs = [] %}
            {% for volunteer in session.volunteers %}
                {% set _ = volunteer_orgs.append(volunteer.primary_affiliation_id) %}
            {% endfor %}
            {{ volunteer_orgs|join(', ') }}
        {% else %}
            No volunteer
        {% endif %}
    </td>
    <td>
        <a href="{{ url_for('edit_session', session_id=session.id) }}" class="btn btn-primary">Edit</a>
    </td>    
    <td>
        <a href="#" hx-delete="/delete-session?session_id={{ session.id }}" hx-target="closest tr" hx-swap="outerHTML delete" hx-confirm="Are you sure you want to delete this session?" class="btn btn-danger btn-sm">Delete</a>
    </td>
</tr>
